{#
	This page shows a list of all pages with quick access to some commands
#}
{% from 'admin/pages/macros.html' import toolbar, ajax_functions %}
{{ ajax_functions(true) }}
<script>
	function getRow(path) {
		return $("tr[id='page_" + path + "']");
	}
	function deleteSuccess(path) {
		getRow(path).remove();
	}
	function moveSuccess(oldpath, newpath) {
		getRow(oldpath).find('#path').html(newpath);
	}
	function copySuccess(oldpath, newpath) {
		var parent = getRow(oldpath);
		var clone = parent.clone();
		clone.find('#path').html(newpath);
		clone.find('#featured').html('');
		parent.after(clone);
	}
</script>
<table class="table table-hover">
	<thead>
		<tr>
			<th>Page</th>
			<th>Path</th>
			<th>Featured</th>
			<th>Tools</th>
		</tr>
	</thead>
	<tbody>
		{% for page in content.data.pages %}
		<tr id="page_{{ page.url }}">
			<td>{% if page.url == '/' and page.title == '' %}Main Page{% endif %}{{ page.title }}</td>
			<td id="path">{{ page.url }}</td>
			<td class="text-center" id="featured">{% if page.featured %}<span class="glyphicon glyphicon-ok" aria-hidden="true"></span><span class="sr-only">Featured</span>{% endif %}</td>
			<td>{{ toolbar(page.url) }}</td>
		</tr>
		{% endfor %}
	</tbody>
</table>
<br />
<div>
	<a class="btn btn-primary" href="/admin/pages/create/" target="_blank">Create a new Page</a>
</div>